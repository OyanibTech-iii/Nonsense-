{% extends 'user_page/base_user.html.twig' %}

{% block title %}Edit Stock - #{{ stock.id }}{% endblock %}
{% block page_title %}Edit Stock{% endblock %}
{% block page_subtitle %}Update stock entry #{{ stock.id }}{% endblock %}

{% block user_content %}
<div class="max-w-6xl mx-auto">
    <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
            <!-- Edit Form -->
            <div class="lg:col-span-2">
                <div class="card">
                    <div class="card-header bg-gradient-to-r from-bright-green to-dark-forest-green">
                        <h2 class="text-sm font-semibold text-white flex items-center gap-2">
                            <ion-icon name="create-outline" class="text-sm"></ion-icon>
                            Edit Stock Information
                        </h2>
                    </div>
                    <div class="card-body">
                        {{ include('stock/_form.html.twig', {'button_label': 'Update Stock'}) }}
                    </div>
                </div>
            </div>

            <!-- Actions Sidebar -->
            <div class="lg:col-span-1">
                <div class="card">
                    <div class="card-header bg-gradient-to-r from-gray-600 to-gray-700">
                        <h3 class="text-sm font-semibold text-white flex items-center gap-2">
                            <ion-icon name="settings-outline" class="text-sm"></ion-icon>
                            Actions
                        </h3>
                    </div>
                    <div class="card-body space-y-4">
                        <a href="{{ path('app_stock_show', {'id': stock.id}) }}" 
                           class="btn-secondary w-full flex items-center justify-center gap-2 text-sm">
                            <ion-icon name="eye-outline" class="text-sm"></ion-icon>
                            View Stock
                        </a>
                        
                        <a href="{{ path('app_stock_index') }}" 
                           class="btn-secondary w-full flex items-center justify-center gap-2 text-sm">
                            <ion-icon name="list-outline" class="text-sm"></ion-icon>
                            View All Stock
                        </a>

                        {% if is_granted('STOCK_DELETE', stock) %}
                            <div class="border-t border-gray-200 pt-4">
                                <h4 class="text-xs font-medium text-gray-900 mb-3">Danger Zone</h4>
                                {{ include('stock/_delete_form.html.twig') }}
                            </div>
                        {% endif %}
                    </div>
                </div>

                <!-- Current Stock Info -->
                <div class="card mt-6">
                    <div class="card-header bg-gradient-to-r from-blue-500 to-blue-600">
                        <h3 class="text-sm font-semibold text-white flex items-center gap-2">
                            <ion-icon name="information-circle-outline" class="text-sm"></ion-icon>
                            Current Stock
                        </h3>
                    </div>
                    <div class="card-body">
                        <div class="space-y-4">
                            <div class="text-center">
                                <div class="text-lg font-bold text-bright-green">{{ stock.Quantity }}</div>
                                <div class="text-xs text-gray-500">Current Quantity</div>
                            </div>
                            <div class="text-center">
                                <div class="text-lg font-bold text-bright-green">{{ stock.products|length }}</div>
                                <div class="text-xs text-gray-500">Associated Products</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
</div>
{% endblock %}
